---
// Import SecondaryCTA component for use in this module
import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro";
import Icon from "@components/ui/icons/Icon.astro";

// Define props from Astro
const { pricing } = Astro.props;

// Define TypeScript type for products.
type Plan = {
  name: string;
  price: string;
  billingFrequency: string;
  description: string;
  features: string[];
  isFeatured?: boolean;
  purchaseBtnTitle: string;
  purchaseLink: string;
};

interface PricingData {
  title: string;
  subTitle?: string;
  plans: Plan[];
}

interface Props {
  pricing: PricingData;
}

interface PricingSectionProps {
  title: string;
  subTitle: string;
  badge: string;
  thirdOption: string;
  btnText: string;
  pricing: {
    title: string;
    subTitle: string;
    standard: Product;
    plus: Product;
  };
}
---

<section class="bg-white py-20 sm:py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-2xl text-center">
      <h2 class="text-3xl font-bold tracking-tight text-neutral-800 sm:text-4xl">
        {pricing.title}
      </h2>
      {
        pricing.subTitle && (
          <p class="mt-4 text-lg text-neutral-600">{pricing.subTitle}</p>
        )
      }
    </div>

    <div
      class="isolate mx-auto mt-16 grid max-w-md grid-cols-1 gap-y-8 md:max-w-4xl md:grid-cols-2 lg:max-w-5xl"
    >
      {
        pricing.plans.map((plan) => (
          <div
            class:list={[
              "rounded-3xl p-8 ring-1 ring-neutral-200",
              { "bg-neutral-50 ring-2 ring-sky-500": plan.isFeatured },
            ]}
          >
            <h3 class="text-lg font-semibold leading-8 text-neutral-800">
              {plan.name}
            </h3>
            <p class="mt-4 text-sm leading-6 text-neutral-600">
              {plan.description}
            </p>
            <p class="mt-6 flex items-baseline gap-x-1">
              <span class="text-4xl font-bold tracking-tight text-neutral-900">
                {plan.price}
              </span>
              <span class="text-sm font-semibold leading-6 text-neutral-600">
                {plan.billingFrequency}
              </span>
            </p>
            <a
              href={plan.purchaseLink}
              class:list={[
                "mt-6 block rounded-md py-2 px-3 text-center text-sm font-semibold leading-6",
                plan.isFeatured
                  ? "bg-sky-500 text-white hover:bg-sky-600"
                  : "bg-white text-sky-500 ring-1 ring-inset ring-sky-200 hover:ring-sky-300",
              ]}
            >
              {plan.purchaseBtnTitle}
            </a>
            <ul
              role="list"
              class="mt-8 space-y-3 text-sm leading-6 text-neutral-600"
            >
              {plan.features.map((feature) => (
                <li class="flex gap-x-3">
                  <Icon name="checkCircle" class="h-6 w-5 flex-none text-sky-500" />
                  {feature}
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>
     <div class="mt-16 text-center">
        <h3 class="text-lg font-semibold text-neutral-800">Custom</h3>
        <p class="mt-4 text-neutral-600">
            Contact us for enterprise solutions, large transaction volumes, or custom integrations.
        </p>
        <a href="/contact" class="mt-6 inline-block rounded-md bg-neutral-800 px-6 py-3 text-sm font-semibold text-white hover:bg-neutral-700">
            Contact us
        </a>
    </div>
  </div>
</section>
